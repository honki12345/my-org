* 파이썬 코딩의 기술* 파이썬의 기술
일부는 파이썬이 제공하는 풍부한 표현력을 모두 수용하지 못학 제한된 사고방식으로 파이썬에 접근한다
일부는 파이썬 기능을 과도하게 사용하는 탓에 향후 큰 문제를 겪기도 한다
이 책은 파이썬을 사용하는 가장 좋은 방법에 대한 통찰력을 제공한다
** 1장 파이썬답게 생각하기
*** Better way 1 사용 중인 파이썬의 버전을 알아두라
*** Better way 2 PEP 8 스타일 가이드를 따르라
**** 공백
- 탭 대신 스페이스를 사용해 들여쓰기 하라
- 문법적으로 중요한 들여쓰기는 4칸 스페이스를 사용하라
- 긴 식을 다음 줄에 이어서 쓸 경우에는 일반적인 들여쓰기보다 4 스페이스를 더 들여써야 한다
- 딕셔너리에서 한 줄 안에 키와 값을 같이 넣는 경우에는 콜론 다음에 스페이스를 하나 넣는다
- 타입표기를 덧부이는 경우 콜론과 타입 정보 사이에 스페이스를 하나 넣어라
**** 식과 문
- 긍정적인 식을 부정하지 말고(if not a is b) 부정을 내부에 넣어라(if a is not b)
- 빈 컨테이너나 시퀀스 값이 암묵적으로 `False`로 취급된다는 사실을 활용해 `if not 컨테이너`를 써라
- 마찬가지로 비어 있지 않은 컨테이너나 시퀀스의 길이가 0보다 큰지 비교할 때 `if 컨테이너`를 활용해라
**** 임포트
- import 문을 항상 파일 맨 앞에 위치시켜라
- 임포트를 적을 때 표준 라이브러리 모듈, 서브파티모듈, 사용자정의모듈 순서로 섹션을 나눠라.
  각 세션은 알파벳 순서로 모듈을 임포트하라
*** Better way 3 bytes와 str의 차이를 알아두라
**** 기억해야 할 내용
- ~bytes~ 에는 8비트 값의 시퀀스가 들어 있고, ~str~ 에는 유니코드 코드 포인트의 시퀀스가 들어 있다
- 이진 데이터를 파일에서 읽거나 쓰고 싶으면 항상 이진모드('rb', 'wb')로 파일을 열어라
- 유니코드 데이터를 파일에서 읽거나 파일에 쓰고 싶을 때는 시스템 디폴트 인코딩에 주의하라
  인코딩 차이로 놀라고 싶지 않으면 ~open~ 에 ~encoding~ 파라미터를 명시적으로 전달하라
*** Better way 4 C 스타일 형식 문자열을 str.format과 쓰기보다는 f-문자열을 통한 인터폴레이션을 사용하라
*** Better way 5 복잡한 식을 쓰는 대신 도우미 함수를 작성하라
**** 기억해야 할 내용
- 파이썬 문법을 사용하면 아주 복잡하고 읽기 어려운 한 줄짜리 식을 쉽게 작성할 수 있다
- 복잡한 식을 도우미 함수로 옮겨라. 특히 같은 로직을 반복해 사용할 때는 도우미 함수를 꼭 사용하라
- 불(boolean) 연산자나 ~or~ 나 ~and~ 를 식에 사용하는 것보다 ~if/else~ 식을 쓰는 편이 더 가독성이 좋다
*** Better way 6 인덱스를 사용하는 대신 대입을 사용해 데이터를 언패킹하라
**** 기억해야 할 내용
- 파이썬 언패킹은 모든 이터러블에 적용할 수 있다. 그리고 이터러블이 여러 계층으로 내포된 경우에도 언패킹을 적용할 수 있다
- 인덱스를 사용해 시퀀스 내부에 접근하는 대신 언패킹을 사용해 시각적인 잡음을 줄이고 코드를 더 명확하게 만들어라
*** Better way 7 range보다는 enumerate를 사용하라
**** 기억해야 할 내용
- ~enumerate~ 를 사용하면 이터레이터에 대해 루프를 돌면서 이터레이터에서 가져오는 원소의 인덱스까지 얻는 코드를 간결하게 작성할 수 있다
- ~enumerate~ 의 두번째 파라미터로 어디부터 원소를 가져오기 시작할지 지정할 수 있다 (디폴트 값은 0 이다)
*** Better way 8 여러 이터레이터에 대해 나란히 루프를 수행하려면 zip을 사용하라
**** 기억해야 할 내용
- ~zip~ 내장 함수를 사용해 여러 이터레이터를 나란히 이터레이션 할 수 있다
- ~zip~ 은 튜플을 지연 계산하는 제너레이터를 만든다
- 입력 이터레이터의 길이가 서로 다르면 ~zip~ 은 아무런 경고도 없이 가장 짧은 이터레이터 길이까지만 튜플을 내놓고 종료한다
- 길이가 서로 다른 이터레이터에 대해 끝까지 루프를 수행하려면 ~itertools~ 내장 모듈의 ~zip_logest~ 함수를 사용하라
*** Better way 9 for나 while 루프 뒤에 else 블록을 사용하지 말라
*** Better way 10 대입식을 사용해 반복을 피하라
**** 기억해야 할 내용
- 대입식이 더 큰 식의 일부분으로 쓰일 때는 괄호로 둘러싸야 한다
- 파이썬에서는 ~switch/case~ 문이나 ~do/while~ 루프를 쓸 수 없지만 대입식을 사용하면 흉내 가능하다
** 2장 리스트와 딕셔너리
*** Better way 11 시퀀스를 슬라이싱하는 방법을 익혀라
*** Better way 12 스트라이드와 슬라이스를 한 식에 함께 사용하지 말라
*** Better way 13 슬라이싱보다는 나머지를 모두 잡아내는 언패킹을 사용하라
*** Better way 14 복잡한 기준을 사용해 정렬할 때는 key 파라미터를 사용하라
*** Better way 15 딕셔너리 삽입 순서에 의존할 때는 조심하라
*** Better way 16 in을 사용하고 딕셔너리 키가 없을 때 KeyError를 처리하기보다는 get을 사용하라
*** Better way 17 내부 상태에서 원소가 없는 경우를 처리할 때는 setdefault보다 defaultdict를 사용하라
*** Better way 18 __missing__을 사용해 키에 따라 다른 디폴트 값을 생성하는 방법을 알아두라

** 3장 함수
*** Better way 19 함수가 여러 값을 반환하는 경우 절대로 네 값 이상을 언패킹하지 말라
*** Better way 20 None을 반환하기보다는 예외를 발생시켜라
*** Better way 21 변수 영역과 클로저의 상호작용 방식을 이해하라
- 자신을 감싸는 영역의 변수를 변경한다는 사실을 표시할 때는 ~nonlocal~ 문을 사용하라
- 간단한 함수가 아닌 경우에는 ~nonlocal~ 문을 사용하지 마라
*** Better way 22 변수 위치 인자를 사용해 시각적인 잡음을 줄여라
*** Better way 23 키워드 인자로 선택적인 기능을 제공하라
*** Better way 24 None과 독스트링을 사용해 동적인 디폴트 인자를 지정하라
*** Better way 25 위치로만 인자를 지정하게 하거나 키워드로만 인자를 지정하게 해서 함수 호출을 명확하게 만들라
*** Better way 26 functools.wrap을 사용해 함수 데코레이터를 정의하라

** 4장 컴프리헨션과 제너레이터
*** Better way 27 map과 filter 대신 컴프리헨션을 사용하라
*** Better way 28 컴프리헨션 내부에 제어 하위 식을 세 개 이상 사용하지 말라
*** Better way 29 대입식을 사용해 컴프리헨션 안에서 반복 작업을 피하라
- 대입식을 통해 컴프리헨션 또는 제너레이터의 *조건* 부분에서 사용한 값을 다른 위치에서 재사용할 수 있다
- 조건이 *아닌* 부분에서도 대입식을 사용할 수 있지만 노출되기 때문에 사용을 피해야 한다
*** Better way 30 리스트를 반환하기보다는 제너레이터를 사용하라
*** Better way 31 인자에 대해 이터레이션할 때는 방어적이 돼라
*** Better way 32 긴 리스트 컴프리헨션보다는 제너레이터 식을 사용하라
*** Better way 33 yield from을 사용해 여러 제너레이터를 합성하라
*** Better way 34 send로 제너레이터에 데이터를 주입하지 말라
*** Better way 35 제너레이터 안에서 throw로 상태를 변화시키지 말라
*** Better way 36 이터레이터나 제너레이터를 다룰 때는 itertools를 사용하라

** 5장 클래스와 인터페이스
*** Better way 37 내장 타입을 여러 단계로 내포시키기보다는 클래스를 합성하라
*** Better way 38 간단한 인터페이스의 경우 클래스 대신 함수를 받아라
**** 기억해야 할 내용
- 파이썬의 여러 컴포넌트 사이에 간단한 인터페이스가 필요할 때는 클래스를 정의하고 인스턴스화하는 대신 *간단한 함수* 를 사용할 수 있다
- 파이썬 함수나 메서드는 일급 시민이다.
- ~__call__~ 특별 메서드를 사용하면 클래스의 인스턴스인 객체를 일반 파이썬 함수처럼 호출할 수 있다
- 상태를 유지하기 위한 함수가 필요한 경우에는 상태가 있는 클로저를 정의하는 대신 ~__call__~ 메서드가 있는 클래스를 정의할지 고려해보라
*** Better way 39 객체를 제너릭하게 구성하려면 @classmethod를 통한 다형성을 활용하라
*** Better way 40 super로 부모 클래스를 초기화하라
*** Better way 41 기능을 합성할 때는 믹스인 클래스를 사용하라
*** Better way 42 비공개 애트리뷰트보다는 공개 애트리뷰트를 사용하라
*** Better way 43 커스텀 컨테이너 타입은 collections.abc를 상속하라

** 6장 메타클래스와 애트리뷰트
*** Better way 44 세터와 게터 메서드 대신 평범한 애트리뷰트를 사용하라
*** Better way 45 애트리뷰트를 리팩터링하는 대신 @property를 사용하라
*** Better way 46 재사용 가능한 @property 메서드를 만들려면 디스크립터를 사용하라
*** Better way 47 지연 계산 애트리뷰트가 필요하면 __getattr__, __getattribute__, __setattr__을 사용하라
*** Better way 48 __init_subclass__를 사용해 하위 클래스를 검증하라
*** Better way 49 __init_subclass__를 사용해 클래스 확장을 등록하라
*** Better way 50 __set_name__으로 클래스 애트리뷰트를 표시하라
*** Better way 51 합성 가능한 클래스 확장이 필요하면 메타클래스보다는 클래스 데코레이터를 사용하라

** 7장 동시성과 병렬성
*** Better way 52 자식 프로세스를 관리하기 위해 subprocess를 사용하라
*** Better way 53 블로킹 I/O의 경우 스레드를 사용하고 병렬성을 피하라
*** Better way 54 스레드에서 데이터 경합을 피하기 위해 Lock을 사용하라
*** Better way 55 Queue를 사용해 스레드 사이의 작업을 조율하라
*** Better way 56 언제 동시성이 필요할지 인식하는 방법을 알아두라
*** Better way 57 요구에 따라 팬아웃을 진행하려면 새로운 스레드를 생성하지 말라
*** Better way 58 동시성과 Queue를 사용하기 위해 코드를 어떻게 리팩터링해야 하는지 이해하라
*** Better way 59 동시성을 위해 스레드가 필요한 경우에는 ThreadpoolExecutor를 사용하라
*** Better way 60 I/O를 할 때는 코루틴을 사용해 동시성을 높여라
*** Better way 61 스레드를 사용한 I/O를 어떻게 asyncio로 포팅할 수 있는지 알아두라
*** Better way 62 asyncio로 쉽게 옮겨갈 수 있도록 스레드와 코루틴을 함께 사용하라
*** Better way 63 응답성을 최대로 높이려면 asyncio 이벤트 루프를 블록하지 말라
*** Better way 64 진정한 병렬성을 살리려면 concurrent.futures를 사용하라

** 8장 강건성과 성능
*** Better way 65 try/except/else/finally의 각 블록을 잘 활용하라
*** Better way 66 재사용 가능한 try/finally 동작을 원한다면 contextlib과 with 문을 사용하라
*** Better way 67 지역 시간에는 time보다는 datetime을 사용하라
*** Better way 68 copyreg를 사용해 pickle을 더 신뢰성 있게 만들라
*** Better way 69 정확도가 매우 중요한 경우에는 decimal을 사용하라
*** Better way 70 최적화하기 전에 프로파일링을 하라
*** Better way 71 생산자-소비자 큐로 deque를 사용하라
*** Better way 72 정렬된 시퀀스를 검색할 때는 bisect를 사용하라
*** Better way 73 우선순위 큐로 heapq를 사용하는 방법을 알아두라
*** Better way 74 bytes를 복사하지 않고 다루려면 memoryview와 bytearray를 사용하라

** 9장 테스트와 디버깅
*** Better way 75 디버깅 출력에는 repr 문자열을 사용하라
*** Better way 76 TestCase 하위 클래스를 사용해 프로그램에서 연관된 행동 방식을 검증하라
*** Better way 77 setUp, tearDown, setUpModule, tearDownModule을 사용해 각각의 테스트를 격리하라
*** Better way 78 목을 사용해 의존 관계가 복잡한 코드를 테스트하라
*** Better way 79 의존 관계를 캡슐화해 모킹과 테스트를 쉽게 만들라
*** Better way 80 pdb를 사용해 대화형으로 디버깅하라
*** Better way 81 프로그램이 메모리를 사용하는 방식과 메모리 누수를 이해하기 위해 tracemalloc을 사용하라

** 10장 협업
*** Better way 82 커뮤니티에서 만든 모듈을 어디서 찾을 수 있는지 알아두라
*** Better way 83 가상 환경을 사용해 의존 관계를 격리하고 반복 생성할 수 있게 하라
*** Better way 84 모든 함수, 클래스, 모듈에 독스트링을 작성하라
*** Better way 85 패키지를 사용해 모듈을 체계화하고 안정적인 API를 제공하라
*** Better way 86 배포 환경을 설정하기 위해 모듈 영역의 코드를 사용하라
*** Better way 87 호출자를 API로부터 보호하기 위해 최상위 Exception을 정의하라
*** Better way 88 순환 의존성을 깨는 방법을 알아두라
*** Better way 89 리팩터링과 마이그레이션 방법을 알려주기 위해 warning을 사용하라
*** Better way 90 typing과 정적 분석을 통해 버그를 없애라
